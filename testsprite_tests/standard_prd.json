{
  "meta": {
    "project": "Sistema de Registro de Distribuição Espacial de Animais - Nova Iguaçu/RJ",
    "date": "2025-09-29",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "Aplicação web para registro, análise e visualização da distribuição espacial de animais domésticos (cães e gatos) no município de Nova Iguaçu/RJ, equipada com autenticação, controle de acesso por perfil, dashboard interativo, formulários validados em tempo real, tabelas de registros avançadas, análises geoespaciais via mapas interativos e múltiplos formatos de exportação de dados.",
  "core_goals": [
    "Permitir registro estruturado e validado de animais domésticos com captura automática de coordenadas GPS.",
    "Garantir controle seguro de acesso e permissões diferenciadas entre usuários Admin e Funcionário.",
    "Fornecer análises estatísticas e geoespaciais intuitivas para acompanhamento da distribuição animal.",
    "Disponibilizar interface responsiva e otimizada para uso móvel em campo.",
    "Suportar colaboração em tempo real entre múltiplos pesquisadores, com sincronização de dados na nuvem.",
    "Possibilitar exportação de dados em múltiplos formatos para backup e análise externa.",
    "Oferecer segurança robusta com políticas RLS e criptografia end-to-end para proteção dos dados.",
    "Assegurar funcionamento offline total, com uso de LocalStorage e indicadores visuais de status de conexão."
  ],
  "key_features": [
    "Sistema completo de autenticação com login, registro, recuperação de senha e logout seguro usando Supabase Auth.",
    "Dashboard interativo com gráficos de barras, pizza, cards estatísticos e evolução temporal dos registros.",
    "Formulário de registro com validação em tempo real, máscaras para telefone brasileiro e detecção de duplicatas.",
    "Tabela de registros com paginação, filtros avançados, busca global, edição, duplicação e exclusão conforme permissões.",
    "Mapas interativos com OpenStreetMap, marcador de registros com GPS, filtros por tipo de animal e popups informativos.",
    "Controle de acessos e permissões detalhadas com perfis Admin e Funcionário, e auditoria completa de modificações.",
    "Exportação de dados em formatos CSV, JSON, SPSS, GeoJSON, relatórios TXT e backups completos.",
    "Modo offline funcional integralmente com armazenamento no LocalStorage e sincronização quando online.",
    "Interface responsiva adaptada para desktop, tablet e dispositivos móveis com otimizações UX.",
    "Backup automático na nuvem e sistema de segurança com RLS, sanitização de inputs e criptografia TLS/JWT."
  ],
  "user_flow_summary": [
    "Usuário realiza cadastro ou login via sistema de autenticação Supabase, com suporte à recuperação de senha.",
    "Usuário autenticado navega pelo dashboard para visualizar estatísticas e gráficos sobre a distribuição dos animais.",
    "Usuário acessa o formulário de registro para inserir um novo animal, preenchendo campos obrigatórios e capturando GPS opcionalmente, com validação em tempo real.",
    "Usuário utiliza a tabela de registros para buscar, filtrar, ordenar e editar os dados conforme permissões atribuidas.",
    "Usuário navega por mapas interativos que exibem a localização dos registros e podem filtrar por tipo de animal.",
    "Usuário exporta dados na interface de análises em múltiplos formatos para uso externo.",
    "Admin gerencia usuários e acessos, visualiza auditoria e configura permissões de maneira segura."
  ],
  "validation_criteria": [
    "Funcionamento correto do sistema de autenticação: login, logout, registro, recuperação de senha e persistência de sessão.",
    "Validação e salvamento correto dos dados no formulário de registro, incluindo captura e exibição de coordenadas GPS.",
    "Correção dos estados de loading, especialmente o problema do loading infinito após login.",
    "Sincronização em tempo real dos dados entre múltiplos usuários sem perdas ou inconsistências.",
    "Restrições de acesso conforme perfil de usuário, permitindo ou bloqueando ações adequadamente.",
    "Renderização correta e responsiva dos dashboards, tabelas e mapas com dados atualizados.",
    "Exportação dos dados nos vários formatos especificados, garantindo integridade e compatibilidade dos arquivos gerados.",
    "Teste da funcionalidade offline, incluindo salvamento local e sincronização posterior ao restabelecimento da conexão.",
    "Robustez na segurança, incluindo validação server-side, sanitização de inputs, criptografia e conformidade regulamentar (LGPD)."
  ],
  "code_summary": {
    "projectName": "Sistema de Registro de Distribuição Espacial de Animais - Nova Iguaçu/RJ",
    "description": "Sistema web para registro e análise de distribuição espacial de animais domésticos em Nova Iguaçu/RJ, com funcionalidades de autenticação, dashboard interativo, formulários de registro e análises geoespaciais.",
    "techStack": {
      "frontend": {
        "framework": "React 18.2.0",
        "buildTool": "Vite 5.0.8",
        "styling": "Tailwind CSS 3.4.0",
        "stateManagement": "Zustand 4.4.7",
        "routing": "React Router DOM 6.20.1"
      },
      "backend": {
        "database": "Supabase",
        "authentication": "Supabase Auth"
      },
      "libraries": {
        "ui": "Lucide React 0.294.0",
        "charts": "Recharts 2.10.3",
        "maps": "React Leaflet 4.2.1, Leaflet 1.9.4",
        "dateHandling": "date-fns 3.0.6",
        "dataExport": "PapaParse 5.4.1",
        "inputMask": "React Input Mask 2.0.4"
      }
    },
    "features": [
      {
        "name": "Autenticação",
        "description": "Sistema de login/logout com Supabase Auth",
        "components": [
          "AuthProvider",
          "Login",
          "Register"
        ],
        "status": "implemented"
      },
      {
        "name": "Dashboard Interativo",
        "description": "Painel com estatísticas, gráficos de barras e pizza, evolução temporal",
        "components": [
          "Dashboard"
        ],
        "status": "implemented"
      },
      {
        "name": "Formulário de Registro",
        "description": "Formulário para registro de animais com validação em tempo real",
        "components": [
          "FormularioRegistro"
        ],
        "status": "implemented"
      },
      {
        "name": "Tabela de Registros",
        "description": "Tabela com filtros, busca, paginação e edição de registros",
        "components": [
          "TabelaRegistros"
        ],
        "status": "implemented"
      },
      {
        "name": "Análises Geoespaciais",
        "description": "Mapas interativos e exportação de dados",
        "components": [
          "Analises"
        ],
        "status": "implemented"
      },
      {
        "name": "Sistema de Permissões",
        "description": "Controle de acesso baseado em perfis de usuário",
        "components": [
          "usePermissions"
        ],
        "status": "implemented"
      }
    ],
    "architecture": {
      "pattern": "Component-based React with custom hooks",
      "stateManagement": "Zustand for global state, React hooks for local state",
      "dataFlow": "Unidirectional data flow with Supabase real-time subscriptions",
      "authentication": "Supabase Auth with context provider pattern"
    },
    "mainComponents": [
      {
        "name": "App.jsx",
        "path": "src/App.jsx",
        "description": "Componente raiz com roteamento e controle de autenticação",
        "type": "root"
      },
      {
        "name": "AuthProvider.jsx",
        "path": "src/contexts/AuthProvider.jsx",
        "description": "Provedor de contexto de autenticação com Supabase",
        "type": "context"
      },
      {
        "name": "Dashboard.jsx",
        "path": "src/components/Dashboard.jsx",
        "description": "Painel principal com estatísticas e gráficos",
        "type": "component"
      },
      {
        "name": "FormularioRegistro.jsx",
        "path": "src/components/FormularioRegistro.jsx",
        "description": "Formulário para registro de novos animais",
        "type": "component"
      },
      {
        "name": "TabelaRegistros.jsx",
        "path": "src/components/TabelaRegistros.jsx",
        "description": "Tabela com listagem e gerenciamento de registros",
        "type": "component"
      },
      {
        "name": "useSupabaseStore.js",
        "path": "src/store/useSupabaseStore.js",
        "description": "Store Zustand para gerenciamento de estado global",
        "type": "store"
      }
    ],
    "currentIssues": [
      {
        "type": "bug",
        "severity": "high",
        "description": "Aplicação fica em loading infinito após login",
        "affectedComponents": [
          "AuthProvider",
          "App"
        ],
        "symptoms": [
          "Tela de loading permanente",
          "Impossibilidade de logout",
          "HMR (Hot Module Replacement) com invalidações constantes"
        ]
      },
      {
        "type": "technical_debt",
        "severity": "medium",
        "description": "Problemas de HMR com Vite relacionados ao export do useAuth",
        "affectedComponents": [
          "AuthProvider"
        ],
        "symptoms": [
          "Invalidações constantes do módulo AuthProvider.jsx",
          "Mensagens de erro sobre export incompatível do useAuth"
        ]
      }
    ],
    "testingNeeds": [
      {
        "type": "authentication",
        "priority": "high",
        "description": "Testar fluxo completo de login/logout",
        "scenarios": [
          "Login com credenciais válidas",
          "Logout funcional",
          "Persistência de sessão",
          "Redirecionamento após autenticação"
        ]
      },
      {
        "type": "loading_states",
        "priority": "high",
        "description": "Verificar estados de loading e transições",
        "scenarios": [
          "Loading inicial da aplicação",
          "Transição após login bem-sucedido",
          "Timeout de loading",
          "Estados de erro"
        ]
      },
      {
        "type": "ui_functionality",
        "priority": "medium",
        "description": "Testar funcionalidades principais da interface",
        "scenarios": [
          "Navegação entre abas",
          "Formulários de registro",
          "Filtros e busca",
          "Exportação de dados"
        ]
      }
    ],
    "environment": {
      "development": {
        "port": 3000,
        "baseUrl": "/APP-min-sa-de/",
        "hotReload": true
      },
      "dependencies": {
        "node": ">=16.0.0",
        "npm": ">=7.0.0"
      }
    }
  }
}
